<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Semantische Suche â€“ Schleiermacher-Briefwechsel | BBAW</title>
  <style>
    /*========================
      K L A S S I S C H E S  L A Y O U T
    ========================*/
    :root{
      --bg: #f7f4ec;           /* Papier-/Pergament-Ton */
      --paper: #fffdf8;        /* helle Kartenfarbe */
      --ink: #2b2b2b;          /* Textfarbe */
      --muted: #6a6a6a;        /* SekundÃ¤rtext */
      --rule: #d6d0c4;         /* Zierlinien */
      --accent: #7a5c3e;       /* Sepia-Akzent */
      --accent-dark: #5d452f;
      --link: #2f4f4f;         /* gedÃ¤mpftes BlaugrÃ¼n */
      --focus: #b08a5a;        /* Fokusrahmen */
      --radius: 8px;
    }

    *{ box-sizing: border-box; }

    html, body{
      margin:0; padding:0;
      background: var(--bg);
      color: var(--ink);
    }

    body{
      font-family: Georgia, "Times New Roman", Times, serif;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding: 24px;
    }

    a{ color: var(--link); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    .container{
      max-width: 1100px; margin: 0 auto;
      background: var(--paper);
      border: 1px solid var(--rule);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: 0 2px 0 rgba(0,0,0,.04);
    }

    /* Kopfbereich mit PortrÃ¤t */
    header{
      padding: 28px 28px 22px;
      border-bottom: 1px solid var(--rule);
      background: linear-gradient(0deg, rgba(255,255,255,0.6), rgba(255,255,255,0.6)), url(''); /* optional feines Papiermuster */
    }

    .hero{
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 20px;
      align-items: center;
    }

    .portrait{
      width: 120px; height: 150px; object-fit: cover;
      border: 1px solid var(--rule);
      border-radius: 4px;
      background: #eee;
    }

    .titles h1{
      font-size: 1.9rem; margin: 0 0 6px 0; letter-spacing: .3px;
    }
    .titles p{ margin: 0; color: var(--muted); }

    .bbaw{
      margin-top: 10px; font-variant-caps: small-caps; letter-spacing: .8px; color: var(--accent); font-size: .95rem;
    }

    main{ display: grid; grid-template-columns: 270px 1fr; gap: 28px; padding: 28px; }

    /* Seitenleiste (Filter) */
    aside{
      position: sticky; top: 16px; align-self: start;
      border: 1px solid var(--rule); border-radius: var(--radius); background: #fffef9;
    }
    .panel-head{ padding: 14px 16px; border-bottom: 1px solid var(--rule); background: #fffaf1; font-variant-caps: small-caps; letter-spacing: .6px; color: var(--accent); }
    .panel-body{ padding: 16px; }

    label{ font-weight: 600; font-size: .95rem; display: block; margin-bottom: 6px; color: #3b3b3b; }
    input[type="number"], select, input[type="text"]{
      width: 100%; padding: 10px 12px; border: 1px solid var(--rule); border-radius: 6px; background: #fff;
      font-family: inherit; font-size: 1rem;
    }
    input:focus, select:focus{ outline: 2px solid var(--focus); outline-offset: 2px; }

    .group{ margin-bottom: 14px; }

    .btn{
      display: inline-flex; align-items: center; gap: 8px;
      border: 1px solid var(--accent); background: #fff; color: var(--accent);
      padding: 10px 16px; border-radius: 999px; cursor: pointer; font-weight: 700;
    }
    .btn:hover{ background: #fff7eb; }
    .btn[disabled]{ opacity:.5; cursor: not-allowed; }

    /* Inhaltsspalte */
    .content{
      display: grid; gap: 20px;
    }

    .searchbar{
      display: grid; grid-template-columns: 1fr auto; gap: 10px;
      border: 1px solid var(--rule); border-radius: var(--radius);
      padding: 12px; background: #fffefb;
    }

    .note{
      font-size: .95rem; color: var(--muted);
      padding: 12px 14px; border-left: 3px solid var(--rule); background: #fffefc; border-radius: 4px;
    }

    .stats{
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
    }
    .stat{
      border: 1px solid var(--rule); border-radius: var(--radius); padding: 12px; text-align: center; background: #fff;
    }
    .stat .num{ font-weight: 700; font-size: 1.3rem; }
    .stat .lbl{ color: var(--muted); font-size: .9rem; }

    .result-item{
      border: 1px solid var(--rule); border-radius: var(--radius);
      padding: 16px; background: #fff;
    }
    .result-head{ display:flex; justify-content: space-between; gap: 16px; align-items: baseline; border-bottom: 1px solid var(--rule); padding-bottom: 8px; margin-bottom: 10px; }
    .result-title{ font-weight: 700; font-size: 1.1rem; }
    .meta{ color: var(--muted); font-size: .95rem; }

    .badge{ border: 1px solid var(--rule); border-radius: 999px; padding: 4px 10px; font-size: .85rem; color: var(--accent-dark); background: #fffaf1; }

    .tags{ display:flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .tag{ border: 1px solid var(--rule); border-radius: 999px; padding: 3px 8px; font-size: .85rem; background: #fff; }

    .loading{ display:none; text-align:center; padding: 16px; }

    footer{ border-top: 1px solid var(--rule); background: #fffdf8; color: var(--muted); text-align:center; padding: 16px; }

    /* Modal klassisch */
    .modal{ display:none; position:fixed; inset:0; background: rgba(0,0,0,.45); z-index:1000; }
    .modal-content{ width:min(900px, 94vw); max-height:92vh; overflow: hidden; margin: 3vh auto; background: var(--paper); border:1px solid var(--rule); border-radius: var(--radius); display:flex; flex-direction:column; }
    .modal-header{ padding: 14px 16px; border-bottom:1px solid var(--rule); display:flex; justify-content: space-between; align-items:center; background:#fffaf1; }
    .modal-header h2{ font-size:1.2rem; margin:0; }
    .close{ font-size: 28px; line-height: 1; cursor: pointer; color: var(--accent-dark); }
    .modal-body{ padding: 18px; overflow:auto; }

    .letter-metadata{ border:1px solid var(--rule); border-radius: var(--radius); background:#fffefb; padding: 14px; margin-bottom: 16px; }
    .metadata-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:12px; }
    .metadata-label{ color: var(--accent-dark); font-weight:700; font-size:.9rem; }

    .letter-content{ font-size: 1.05rem; line-height: 1.85; white-space: pre-line; }

    .actions{ display:flex; gap: 8px; margin-top: 14px; }
    .btn-ghost{ border:1px solid var(--rule); background:#fff; color: var(--ink); border-radius: 6px; padding: 8px 12px; cursor: pointer; }
    .btn-ghost:hover{ background:#fffaf1; }

    @media (max-width: 880px){
      main{ grid-template-columns: 1fr; }
      .hero{ grid-template-columns: 80px 1fr; }
      .portrait{ width: 80px; height: 100px; }
      .stats{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="hero">
        <!--
          HINWEIS: FÃ¼gen Sie hier eine echte, gemeinfreie PortrÃ¤tdatei ein.
          Z.B. ersetzen Sie src durch "assets/schleiermacher.jpg" oder eine Ã¶ffentliche URL.
        -->
        <img class="portrait" src="https://encrypted-tbn3.gstatic.com/licensed-image?q=tbn:ANd9GcTImV-KFeB7r0-vjryoV8vPqEOhULtwuunVhjnyRDFvYssFXUYBGflYRM6h0lMHlJPNMj0zj-kc6GjAfgU" alt="Friedrich Schleiermacher (PortrÃ¤t)" />
        <div class="titles">
          <h1>Semantische Suche im Schleiermacherâ€‘Briefwechsel</h1>
          <p>Intelligente Recherche mit TFâ€‘IDF (rein im Browser)</p>
          <div class="bbaw">Berlinâ€‘Brandenburgische Akademie der Wissenschaften</div>
        </div>
      </div>
    </header>

    <main>
      <aside aria-label="Filter">
        <div class="panel-head">Suchparameter</div>
        <div class="panel-body">
          <div class="group">
            <label for="yearFrom">Zeitraum von</label>
            <input type="number" id="yearFrom" min="1768" max="1834" value="1790" placeholder="Jahr" />
          </div>
          <div class="group">
            <label for="yearTo">bis</label>
            <input type="number" id="yearTo" min="1768" max="1834" value="1834" placeholder="Jahr" />
          </div>
          <div class="group">
            <label for="correspondent">Korrespondent</label>
            <select id="correspondent">
              <option value="">Alle</option>
              <option value="reimer">Georg Andreas Reimer</option>
              <option value="gaass">Joachim Christian Gaass</option>
              <option value="brinkmann">Karl Gustav von Brinkmann</option>
              <option value="herz">Henriette Herz</option>
            </select>
          </div>
        </div>
      </aside>

      <section class="content">
        <div class="searchbar">
          <input type="text" id="searchInput" placeholder="Suche z.â€¯B. nach â€šErziehungâ€˜, â€šReligionâ€˜ â€¦" aria-label="Suchbegriff" />
          <button class="btn" id="searchBtn" onclick="performSearch()">ðŸ”Ž Suchen</button>
        </div>

        <div class="note" role="note">
          Diese Demonstration ermÃ¶glicht eine <strong>klassische</strong>, ruhige PrÃ¤sentation der Treffer. Die TFâ€‘IDFâ€‘Suche lÃ¤uft vollstÃ¤ndig lokal, es werden keine externen Dienste kontaktiert.
        </div>

        <div class="stats" aria-label="DatenÃ¼berblick">
          <div class="stat"><div class="num">10</div><div class="lbl">Briefe in der Demo</div></div>
          <div class="stat"><div class="num">9</div><div class="lbl">Korrespondenten</div></div>
          <div class="stat"><div class="num">1799â€“1825</div><div class="lbl">Zeitraum</div></div>
        </div>

        <div class="loading" id="loading">
          <p>Suche lÃ¤uft â€¦</p>
        </div>

        <section id="resultsSection" aria-live="polite" aria-busy="false"></section>
      </section>
    </main>

    <footer>
      <p><strong>Hinweis:</strong> Demonstrationsanwendung (Bewerbungszwecke)</p>
      <p>Konzept fÃ¼r die Berlinâ€‘Brandenburgische Akademie der Wissenschaften</p>
      <p>Datengrundlage: BBAW Archiv &amp; Sammlungen Â· Erstellt: November 2025</p>
    </footer>
  </div>

  <!-- Modal -->
  <div id="letterModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Brief anzeigen</h2>
        <span class="close" role="button" aria-label="SchlieÃŸen" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    // ===== Datenbestand (unverÃ¤ndert aus Ihrer Version) =====
    const letterDatabase = [
      { id: "BBAW-SCH-1812-045", title: "Brief an Georg Andreas Reimer", date: "15. MÃ¤rz 1812", correspondent: "Georg Andreas Reimer", location: "Berlin", excerpt: "Ãœber die GrundsÃ¤tze der Erziehung habe ich in letzter Zeit viel nachgedacht. Es scheint mir, dass die wahre Bildung des Menschen nur durch eine harmonische Entwicklung aller seiner KrÃ¤fte erreicht werden kann...", tags: ["Bildung", "PÃ¤dagogik", "UniversitÃ¤tslehre"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 234", fullText: `Berlin, den 15. MÃ¤rz 1812

Mein verehrter Freund Reimer,

Ãœber die GrundsÃ¤tze der Erziehung habe ich in letzter Zeit viel nachgedacht. Es scheint mir, dass die wahre Bildung des Menschen nur durch eine harmonische Entwicklung aller seiner KrÃ¤fte erreicht werden kann. Die UniversitÃ¤t muss ein Ort sein, wo nicht nur Wissen vermittelt, sondern wo der Geist zur SelbsttÃ¤tigkeit angeregt wird.

Die gegenwÃ¤rtige Lage unserer Bildungsanstalten erfÃ¼llt mich mit Sorge. Zu oft wird den Studierenden fertiges Wissen dargeboten, ohne dass sie selbst zum Denken angeregt werden. Das wahre Studium muss aber in der Ausbildung der FÃ¤higkeit bestehen, selbstÃ¤ndig zu forschen und zu urteilen.

Bei der Konzeption der neuen UniversitÃ¤t, an der ich mitwirken darf, lege ich besonderen Wert darauf, dass Forschung und Lehre eine untrennbare Einheit bilden. Der Professor soll nicht bloÃŸer Wissensvermittler sein, sondern ein Forscher, der die Studierenden an seinem Erkenntnisprozess teilhaben lÃ¤sst.

Die Philosophie muss dabei eine zentrale Rolle spielen, denn sie lehrt uns, die Prinzipien unseres Denkens zu reflektieren.

Mit herzlichen GrÃ¼ÃŸen
Ihr Friedrich Schleiermacher`, physical: "4 Seiten, Tinte auf Papier, guter Erhaltungszustand", provenance: "Nachlass Georg Andreas Reimer, erworben 1867" },
      { id: "BBAW-SCH-1806-122", title: "Brief an Joachim Christian Gaass", date: "22. Oktober 1806", correspondent: "Joachim Christian Gaass", location: "Halle", excerpt: "In diesen schweren Zeiten der politischen UmwÃ¤lzung mÃ¼ssen wir uns auf das Wesentliche besinnen. Die Philosophie lehrt uns, dass der Mensch seine Freiheit nur in der Selbstbestimmung findet...", tags: ["Philosophie", "Politik", "Freiheit"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 156", fullText: `Halle, den 22. Oktober 1806

Lieber Gaass,

In diesen schweren Zeiten der politischen UmwÃ¤lzung mÃ¼ssen wir uns auf das Wesentliche besinnen. Die Philosophie lehrt uns, dass der Mensch seine Freiheit nur in der Selbstbestimmung findet. Die gegenwÃ¤rtigen Ereignisse fordern uns heraus, Ã¼ber die Grundlagen unseres Zusammenlebens neu nachzudenken.

Die Schlacht bei Jena hat uns die VergÃ¤nglichkeit aller Ã¤uÃŸeren Macht vor Augen gefÃ¼hrt. Was bleibt, ist die geistige Kultur, die innere Bildung des Menschen. Gerade jetzt zeigt sich, wie wichtig die Philosophie fÃ¼r das Leben ist.

Ich bin Ã¼berzeugt, dass wir aus dieser Krise gestÃ¤rkt hervorgehen kÃ¶nnen, wenn wir uns auf unsere geistigen KrÃ¤fte besinnen.

Ihr treuer Freund
Schleiermacher`, physical: "3 Seiten, Tinte auf Papier", provenance: "Nachlass J.C. Gaass, Schenkung 1889" },
      { id: "BBAW-SCH-1799-078", title: "Brief an Henriette Herz", date: "8. Juli 1799", correspondent: "Henriette Herz", location: "Potsdam", excerpt: "Die Reden Ã¼ber die Religion entstehen aus dem inneren BedÃ¼rfnis, das GefÃ¼hl der AbhÃ¤ngigkeit und der Verbundenheit mit dem Universum auszudrÃ¼cken. Religion ist nicht Metaphysik oder Moral, sondern Anschauung und GefÃ¼hl des Unendlichen...", tags: ["Theologie", "Religion", "Philosophie"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 089", fullText: `Potsdam, den 8. Juli 1799

Verehrte Freundin,

Die Reden Ã¼ber die Religion, an denen ich arbeite, entstehen aus dem inneren BedÃ¼rfnis, das GefÃ¼hl der AbhÃ¤ngigkeit und der Verbundenheit mit dem Universum auszudrÃ¼cken. Religion ist nicht Metaphysik oder Moral, sondern Anschauung und GefÃ¼hl des Unendlichen.

Die VerÃ¤chter der Religion unter den Gebildeten verstehen nicht, was Religion wirklich ist. Das Wesen der Religion liegt tiefer: Es ist das unmittelbare Bewusstsein der AbhÃ¤ngigkeit von etwas GrÃ¶ÃŸerem.

Ich mÃ¶chte zeigen, dass Religion und Bildung sich nicht widersprechen mÃ¼ssen.

Mit aufrichtiger Hochachtung
Ihr Schleiermacher`, physical: "2 Seiten, Tinte auf Papier", provenance: "Nachlass Henriette Herz, erworben 1903" },
      { id: "BBAW-SCH-1825-201", title: "Brief an August Twesten", date: "12. Januar 1825", correspondent: "August Twesten", location: "Berlin", excerpt: "Die Hermeneutik als Kunstlehre des Verstehens muss systematisch entwickelt werden. Es geht darum, die Bedingungen der MÃ¶glichkeit des Verstehens Ã¼berhaupt zu erfassen...", tags: ["Hermeneutik", "Philosophie", "Methodik"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 678", fullText: `Berlin, den 12. Januar 1825

Verehrter Herr Twesten,

Die Hermeneutik als Kunstlehre des Verstehens muss systematisch entwickelt werden. Es geht darum, die Bedingungen der MÃ¶glichkeit des Verstehens Ã¼berhaupt zu erfassen.

Das Verstehen eines Textes hat zwei Seiten: Die grammatische Interpretation erfasst die Bedeutung der Worte aus der Sprache heraus, die psychologische Interpretation sucht den individuellen Stil des Autors zu verstehen.

Der hermeneutische Zirkel ist unvermeidlich: Um das Ganze zu verstehen, mÃ¼ssen wir die Teile verstehen, aber um die Teile zu verstehen, mÃ¼ssen wir eine Vorstellung vom Ganzen haben.

Mit kollegialen GrÃ¼ÃŸen
Fr. Schleiermacher`, physical: "5 Seiten, Tinte auf Papier", provenance: "Nachlass August Twesten, erworben 1876" },
      { id: "BBAW-SCH-1808-156", title: "Brief an Karl Gustav von Brinkmann", date: "3. November 1808", correspondent: "Karl Gustav von Brinkmann", location: "Berlin", excerpt: "Die Akademie der Wissenschaften sollte nicht nur ein Ort der Gelehrsamkeit sein, sondern ein lebendiger Organismus, in dem verschiedene Disziplinen in fruchtbaren Austausch treten...", tags: ["Wissenschaft", "Akademie", "InterdisziplinaritÃ¤t"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 289", fullText: `Berlin, den 3. November 1808

Hochverehrter Herr von Brinkmann,

Die Akademie der Wissenschaften sollte nicht nur ein Ort der Gelehrsamkeit sein, sondern ein lebendiger Organismus, in dem verschiedene Disziplinen in fruchtbaren Austausch treten. Die Zusammenarbeit zwischen den Wissenschaften ist fÃ¼r den Fortschritt unerlÃ¤sslich.

Besonders fruchtbar ist der Austausch zwischen den philosophischen und den empirischen Wissenschaften. Die Philosophie gibt den Einzelwissenschaften begriffliche Klarheit.

Mit vorzÃ¼glicher Hochachtung
Ihr Schleiermacher`, physical: "3 Seiten, Tinte auf Papier", provenance: "Nachlass K.G. von Brinkmann, Schenkung 1895" },
      { id: "BBAW-SCH-1803-091", title: "Brief an Charlotte von Kathen", date: "14. April 1803", correspondent: "Charlotte von Kathen", location: "Stolp", excerpt: "Das hÃ¤usliche Leben und die Familie sind der Ort, wo sich die sittliche Bildung am unmittelbarsten vollzieht. Die Erziehung der Kinder ist die wichtigste Aufgabe...", tags: ["Familie", "Erziehung", "Sittlichkeit"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 123", fullText: `Stolp, den 14. April 1803

Liebe Charlotte,

Das hÃ¤usliche Leben und die Familie sind der Ort, wo sich die sittliche Bildung am unmittelbarsten vollzieht. Die Erziehung der Kinder ist die wichtigste Aufgabe, die uns anvertraut ist.

Kinder sollten nicht durch strenge Zucht geformt werden, sondern durch liebevolle Anleitung. Die Familie ist eine kleine Welt, in der das Kind fÃ¼r das grÃ¶ÃŸere Leben vorbereitet wird.

Mit herzlichen GrÃ¼ÃŸen
Ihr Schleiermacher`, physical: "2 Seiten, Tinte auf Papier", provenance: "Nachlass Charlotte von Kathen, erworben 1901" },
      { id: "BBAW-SCH-1807-134", title: "Brief an August Wilhelm Schlegel", date: "20. September 1807", correspondent: "August Wilhelm Schlegel", location: "Halle", excerpt: "Die Kunst ist nicht bloÃŸe Nachahmung der Natur, sondern Ausdruck des Unendlichen im Endlichen. Die Poesie ist die hÃ¶chste Form der Kunst...", tags: ["Ã„sthetik", "Kunst", "Poesie"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 201", fullText: `Halle, den 20. September 1807

Verehrter Herr Schlegel,

Die Kunst ist nicht bloÃŸe Nachahmung der Natur, sondern Ausdruck des Unendlichen im Endlichen. Die Poesie ist die hÃ¶chste Form der Kunst, denn sie arbeitet mit der Sprache, dem Medium des Geistes selbst.

Die Romantik sucht die Darstellung des Unendlichen, des nie ganz Fassbaren. Ich sehe hierin eine Verwandtschaft zur Religion.

Hochachtungsvoll
Fr. Schleiermacher`, physical: "3 Seiten, Tinte auf Papier", provenance: "Nachlass A.W. Schlegel, erworben 1897" },
      { id: "BBAW-SCH-1811-178", title: "Brief an Friedrich Heinrich Jacobi", date: "5. Dezember 1811", correspondent: "Friedrich Heinrich Jacobi", location: "Berlin", excerpt: "Der Streit zwischen Glauben und Wissen ist ein Scheinproblem. Es gibt keinen wahren Glauben ohne Erkenntnis und keine Erkenntnis ohne ein Element des Glaubens...", tags: ["Philosophie", "Glaube", "Vernunft"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 345", fullText: `Berlin, den 5. Dezember 1811

Hochverehrter Herr Jacobi,

Der Streit zwischen Glauben und Wissen ist ein Scheinproblem. Die Vernunft kann die letzten GrÃ¼nde nicht beweisen, sie muss sie als gegeben annehmen.

Es gibt eine unmittelbare Gewissheit, ein GefÃ¼hl der schlechthinnigen AbhÃ¤ngigkeit, das aller Reflexion vorausgeht. Diese unmittelbare Gewissheit nenne ich Glauben.

Mit vorzÃ¼glicher Hochachtung
Schleiermacher`, physical: "4 Seiten, Tinte auf Papier", provenance: "Nachlass F.H. Jacobi, Schenkung 1893" },
      { id: "BBAW-SCH-1821-223", title: "Brief an Wilhelm Dilthey Sr.", date: "18. MÃ¤rz 1821", correspondent: "Wilhelm Dilthey Sr.", location: "Berlin", excerpt: "Die Geschichte ist nicht nur eine Aneinanderreihung von Ereignissen, sondern ein sinnvolles Ganzes. Die historische Methode ist daher wesentlich hermeneutisch...", tags: ["Geschichte", "Hermeneutik", "Methode"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 567", fullText: `Berlin, den 18. MÃ¤rz 1821

Sehr geehrter Herr Dilthey,

Die Geschichte ist nicht nur eine Aneinanderreihung von Ereignissen, sondern ein sinnvolles Ganzes. Um sie zu verstehen, mÃ¼ssen wir die Absichten der handelnden Personen nachvollziehen.

Der Historiker muss sich in die Vergangenheit hineinversetzen kÃ¶nnen. Die Spannung zwischen historischer ObjektivitÃ¤t und gegenwÃ¤rtiger Relevanz ist nicht aufzulÃ¶sen.

Mit kollegialen GrÃ¼ÃŸen
Schleiermacher`, physical: "3 Seiten, Tinte auf Papier", provenance: "Nachlass W. Dilthey Sr., erworben 1905" },
      { id: "BBAW-SCH-1800-045", title: "Brief an Friedrich Schlegel", date: "28. Februar 1800", correspondent: "Friedrich Schlegel", location: "Berlin", excerpt: "Die Freundschaft ist eine der hÃ¶chsten Formen menschlicher Beziehung. In der wahren Freundschaft erkennen wir uns selbst im anderen und den anderen in uns selbst...", tags: ["Freundschaft", "PersÃ¶nliches", "Philosophie"], archivSignatur: "BBAW, Nachlass Schleiermacher, Korr. 098", fullText: `Berlin, den 28. Februar 1800

Mein lieber Freund Schlegel,

Die Freundschaft ist eine der hÃ¶chsten Formen menschlicher Beziehung. In der wahren Freundschaft erkennen wir uns selbst im anderen und den anderen in uns selbst. Sie ist mehr als bloÃŸe Sympathie oder gemeinsames Interesse.

Unsere GesprÃ¤che Ã¼ber Literatur und Philosophie haben mich stets bereichert. Die Romantik, die Sie mitbegrÃ¼ndet haben, Ã¶ffnet neue Wege des Denkens und FÃ¼hlens.

In aufrichtiger Freundschaft
Ihr Schleiermacher`, physical: "2 Seiten, Tinte auf Papier", provenance: "Nachlass Friedrich Schlegel, erworben 1892" }
    ];

    // ===== TFâ€‘IDFâ€‘Suche (Ihre Logik leicht bereinigt) =====
    function performSmartSearch(query) {
      const preprocessText = (text) => text.toLowerCase().replace(/[^\wÃ¤Ã¶Ã¼ÃŸ\s]/g, ' ').split(/\s+/).filter(w => w.length > 2);
      const queryTerms = preprocessText(query);
      const documentCount = letterDatabase.length;
      const termDocumentCount = {};

      letterDatabase.forEach(letter => {
        const letterText = `${letter.title} ${letter.excerpt} ${letter.fullText} ${letter.tags.join(' ')}`;
        const terms = new Set(preprocessText(letterText));
        terms.forEach(t => termDocumentCount[t] = (termDocumentCount[t] || 0) + 1);
      });

      const idf = {};
      queryTerms.forEach(term => {
        const df = termDocumentCount[term] || 0;
        idf[term] = df > 0 ? Math.log(documentCount / df) : 0;
      });

      const results = letterDatabase.map(letter => {
        const letterText = `${letter.title} ${letter.excerpt} ${letter.fullText} ${letter.tags.join(' ')}`.toLowerCase();
        const letterTerms = preprocessText(letterText);
        const termFreq = {};
        letterTerms.forEach(t => termFreq[t] = (termFreq[t] || 0) + 1);

        let tfidfScore = 0;
        queryTerms.forEach(term => { tfidfScore += (termFreq[term] || 0) * (idf[term] || 0); });
        const normalized = Math.min(100, Math.round(tfidfScore * 10));

        const titleTerms = preprocessText(letter.title);
        const titleBonus = queryTerms.filter(t => titleTerms.includes(t)).length * 10;

        const tagText = letter.tags.join(' ').toLowerCase();
        const tagBonus = queryTerms.filter(t => tagText.includes(t)).length * 15;

        const semanticRelations = {
          'bildung': ['erziehung','lehre','studium','universitÃ¤t','pÃ¤dagogik'],
          'religion': ['gott','glaube','theologie','kirche','frÃ¶mmigkeit'],
          'philosophie': ['denken','vernunft','geist','erkenntnis'],
          'politik': ['staat','freiheit','gesellschaft','preuÃŸen'],
          'hermeneutik': ['verstehen','interpretation','auslegung','text'],
          'kunst': ['Ã¤sthetik','schÃ¶nheit','poesie','romantik']
        };
        let semanticBonus = 0;
        queryTerms.forEach(qt => {
          Object.entries(semanticRelations).forEach(([key, rel]) => {
            if (qt.includes(key) || rel.some(r => qt.includes(r))) {
              rel.forEach(r => { if (letterText.includes(r)) semanticBonus += 5; });
            }
          });
        });

        const finalScore = Math.min(100, normalized + titleBonus + tagBonus + semanticBonus);
        return { ...letter, similarity: finalScore };
      });

      const filtered = results.filter(r => r.similarity > 15 && applyFilters(r)).sort((a,b) => b.similarity - a.similarity).slice(0,10);
      return filtered;
    }

    function applyFilters(letter){
      const yearFrom = parseInt(document.getElementById('yearFrom').value) || 1768;
      const yearTo = parseInt(document.getElementById('yearTo').value) || 1834;
      const correspondent = document.getElementById('correspondent').value;
      const letterYear = parseInt(letter.date.split(' ')[2]);
      if (letterYear < yearFrom || letterYear > yearTo) return false;
      if (correspondent){
        const map = { 'reimer': 'Georg Andreas Reimer', 'gaass': 'Joachim Christian Gaass', 'brinkmann': 'Karl Gustav von Brinkmann', 'herz': 'Henriette Herz' };
        if (letter.correspondent !== map[correspondent]) return false;
      }
      return true;
    }

    async function performSearch(){
      const q = document.getElementById('searchInput').value;
      const resultsSection = document.getElementById('resultsSection');
      const loading = document.getElementById('loading');
      const btn = document.getElementById('searchBtn');
      if (!q.trim()){ alert('Bitte geben Sie einen Suchbegriff ein.'); return; }
      resultsSection.innerHTML = ''; loading.style.display = 'block'; btn.disabled = true;
      try{
        await new Promise(r => setTimeout(r, 200));
        const hits = performSmartSearch(q);
        displayResults(hits);
      } catch(err){
        resultsSection.innerHTML = `<div class="note">Fehler bei der Suche: ${err.message}</div>`;
      } finally {
        loading.style.display = 'none'; btn.disabled = false;
      }
    }

    function displayResults(results){
      const el = document.getElementById('resultsSection');
      if (results.length === 0){
        el.innerHTML = `<div class="note">Keine Ergebnisse. Bitte passen Sie die Suche oder Filter an.</div>`; return;
      }
      let html = `<h2 style="margin:0 0 6px 0; font-size:1.2rem;">Suchergebnisse (${results.length} Treffer)</h2>`;
      html += `<hr style="border:none; border-top:1px solid var(--rule); margin: 6px 0 14px;" />`;
      results.forEach(r => {
        html += `
          <article class="result-item">
            <div class="result-head">
              <div>
                <div class="result-title">${r.title}</div>
                <div class="meta">${r.date} Â· ${r.location} Â· ${r.correspondent}</div>
                <div class="meta" style="margin-top:4px; font-size:.9rem;">Archivsignatur: ${r.archivSignatur}</div>
              </div>
              <div class="badge" title="automatisch berechnete Relevanz">${r.similarity}%</div>
            </div>
            <p>${r.excerpt}</p>
            <div class="tags">${r.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
            <div style="margin-top:10px;">
              <button class="btn-ghost" onclick="viewFullLetter('${r.id}')">ðŸ“– VollstÃ¤ndigen Brief anzeigen</button>
            </div>
          </article>`;
      });
      el.innerHTML = html;
    }

    function viewFullLetter(id){
      const letter = letterDatabase.find(l => l.id === id);
      if (!letter) return;
      const modal = document.getElementById('letterModal');
      const title = document.getElementById('modalTitle');
      const body = document.getElementById('modalBody');
      title.textContent = letter.title;
      body.innerHTML = `
        <section class="letter-metadata">
          <div class="metadata-grid">
            <div><div class="metadata-label">Briefâ€‘ID</div><div>${letter.id}</div></div>
            <div><div class="metadata-label">Datum</div><div>${letter.date}</div></div>
            <div><div class="metadata-label">Absender</div><div>Friedrich Schleiermacher</div></div>
            <div><div class="metadata-label">EmpfÃ¤nger</div><div>${letter.correspondent}</div></div>
            <div><div class="metadata-label">Ort</div><div>${letter.location}</div></div>
            <div><div class="metadata-label">Archivsignatur</div><div>${letter.archivSignatur}</div></div>
            <div><div class="metadata-label">Physische Beschreibung</div><div>${letter.physical}</div></div>
            <div><div class="metadata-label">Provenienz</div><div>${letter.provenance}</div></div>
          </div>
        </section>
        <h3 style="margin: 0 0 8px 0; font-size:1.05rem; color: var(--accent-dark);">Brieftext (Transkription)</h3>
        <div class="letter-content">${letter.fullText}</div>
        <div class="actions">
          <button class="btn-ghost" onclick="downloadLetter('${letter.id}')">ðŸ’¾ Als PDF herunterladen</button>
          <button class="btn-ghost" onclick="showCitation('${letter.id}')">ðŸ“‹ Zitation kopieren</button>
        </div>`;
      modal.style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeModal(){
      const modal = document.getElementById('letterModal');
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function downloadLetter(id){
      const letter = letterDatabase.find(l => l.id === id);
      alert(`Download-Funktion fÃ¼r Brief ${letter.id}\n\nIn einer vollstÃ¤ndigen Implementierung wÃ¼rde hier ein PDF generiert.`);
    }

    function showCitation(id){
      const letter = letterDatabase.find(l => l.id === id);
      const citation = `Schleiermacher, Friedrich D. E. "${letter.title}". ${letter.date}. ${letter.archivSignatur}. Berlinâ€‘Brandenburgische Akademie der Wissenschaften.`;
      navigator.clipboard.writeText(citation).then(() => alert('Zitation kopiert:\n\n' + citation));
    }

    document.getElementById('searchInput').addEventListener('keypress', (e) => { if (e.key === 'Enter') performSearch(); });
    window.addEventListener('click', (e) => { const modal = document.getElementById('letterModal'); if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
